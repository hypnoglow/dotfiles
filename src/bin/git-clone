#!/bin/bash
#
# Clone git repository considering username/repo_name directory hierarcy.

if [ $# -eq 0 ]; then
    git clone
    exit $?
fi

if [ $# -gt 1 ]; then
    git clone "$@"
    exit $?
fi

# 1 argument. Split repo path to directory path

repo="$1"
path=""

if [[ "$repo" =~ git(hub|lab).com ]]; then
    path="${repo#*:}"
    path="${path%.git}"
fi

if [[ "$repo" =~ git.rn ]]; then
    path="${repo#*git.rn/}"
    path="${path%.git}"

    if [[ "$path" =~ \~* ]]; then
        path="${path#*\~}"
    fi
fi

git clone "$repo" "$path"
exit $?
